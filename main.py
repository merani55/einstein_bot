import logging
import json
import os
import unicodedata
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
def normalize_text(text):
    text = text.strip().lower()
    text = unicodedata.normalize('NFKD', text)
    return ''.join([c for c in text if not unicodedata.combining(c)])
QUEST = [
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 1 â€” ĞŸĞ¾ÑĞ»Ğ°Ğ½Ğ½Ñ ÑĞ²Ñ–Ñ‚Ğ»Ğ°",
        "text": "Â«Ğ£ Ñ‚ĞµĞ¼Ñ€ÑĞ²Ñ– ÑĞ²Ñ–Ñ‚Ğ»Ğ¾ Ñ…Ğ¾Ğ²Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ·Ğ° Ñ‚Ñ€ÑŒĞ¾Ğ¼Ğ° ĞºÑ€Ğ¾ĞºĞ°Ğ¼Ğ¸ Ğ½Ğ°Ğ·Ğ°Ğ´.Â»\nÂ«Ğ Ğ¾Ğ·ÑˆĞ¸Ñ„Ñ€ÑƒĞ¹ Ğ¿Ğ¾ÑĞ»Ğ°Ğ½Ğ½Ñ, Ñ‰Ğ¾ ÑÑ‚Ğ¾Ñ—Ñ‚ÑŒ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ğ¾Ğ·Ñ– Ğ½Ğ¾Ğ²Ğ¸Ñ… Ğ·Ğ½Ğ°Ğ½ÑŒ.Â»\n\nĞ—Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚: `Khoor, Zruog!`",
        "question": "Ğ Ğ¾Ğ·ÑˆĞ¸Ñ„Ñ€ÑƒĞ¹ Ñ†ĞµĞ¹ Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ° ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ¼ Ğ¦ĞµĞ·Ğ°Ñ€Ñ (Ğ·ÑÑƒĞ² Ğ½Ğ° 3 Ğ»Ñ–Ñ‚ĞµÑ€Ğ¸ Ğ½Ğ°Ğ·Ğ°Ğ´).",
        "hint": "ĞŸĞ¾Ğ´ÑƒĞ¼Ğ°Ğ¹ Ğ¿Ñ€Ğ¾ Ñ‚Ğ¾Ğ³Ğ¾, Ñ…Ñ‚Ğ¾ ÑˆÑƒĞºĞ°Ğ² ÑĞ²Ñ–Ñ‚Ğ»Ğ¾ Ñƒ Ğ»Ñ–Ğ½Ğ·Ğ°Ñ… Ñ– Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ½ÑÑ….",
        "answer": ["Hello, World!"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 2 â€” Ğ¡ĞºĞ»ÑĞ½Ğµ Ğ¾Ğ±Ğ»Ğ¸Ñ‡Ñ‡Ñ Ğ½Ğ°ÑƒĞºĞ¸",
        "text": "Â«Ğ†Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ â€” Ñ†Ğµ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ½Ğ½Ñ, Ğ° ÑƒÑĞ²Ğ°.Â» â€” Ğ. Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½\nÂ«Ğ¡Ğ²Ñ–Ñ‚Ğ»Ğ¾ Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°Ñ” Ñ‚Ğµ, Ñ‰Ğ¾ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ñƒ Ñ‚ĞµĞ¼Ñ€ÑĞ²Ñ–.Â»",
        "question": "ĞŸÑ–Ğ´Ñ–Ğ¹Ğ´Ğ¸ Ğ´Ğ¾ Ğ±ÑƒĞ´Ğ¸Ğ½ĞºÑƒ 44 Ğ¿Ğ¾ Ğ²ÑƒĞ»Ğ¸Ñ†Ñ– MÃ¼llerstraÃŸe Ñ– Ğ²Ñ–Ğ´Ğ³Ğ°Ğ´Ğ°Ğ¹, Ñ‰Ğ¾ Ñ†Ğµ Ğ±ÑƒĞ»Ğ¾ Ğ·Ğ° Ğ¼Ñ–ÑÑ†Ğµ, Ğ´Ğµ Ñ„Ñ–Ğ·Ğ¸ĞºĞ° ÑÑ‚Ğ°Ğ²Ğ°Ğ»Ğ° Ğ¼Ğ¸ÑÑ‚ĞµÑ†Ñ‚Ğ²Ğ¾Ğ¼ ÑĞ²Ñ–Ñ‚Ğ»Ğ°. ĞšĞ¾Ğ»Ğ¸ÑÑŒ Ñ‚ÑƒÑ‚ ÑˆĞ»Ñ–Ñ„ÑƒĞ²Ğ°Ğ»Ğ¸ Ğ»Ñ–Ğ½Ğ·Ğ¸, ÑÑŒĞ¾Ğ³Ğ¾Ğ´Ğ½Ñ– â€” Ñ†Ğµ Ğ±ÑƒĞ´Ñ–Ğ²Ğ»Ñ Ğ·Ñ– ÑĞºĞ»ÑĞ½Ğ¸Ğ¼ Ğ¾Ğ±Ğ»Ğ¸Ñ‡Ñ‡ÑĞ¼. ",
        "hint": "Ğ’ Ñ†ÑŒĞ¾Ğ¼Ñƒ Ğ¼Ñ–ÑÑ†Ñ– Ğ¿Ñ€Ğ°Ñ†ÑĞ²Ğ°Ğ»Ğ¸ Ğ½Ğ°Ğ´ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°Ğ¼Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸ĞºĞ¸, Ñ– Ğ²Ğ¾Ğ½Ğ¾ Ğ´Ğ¾ÑÑ– ÑĞ»ÑƒĞ¶Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑƒÑ†Ñ– Ğ½Ğ° Ğ²ÑƒĞ»Ğ¸Ñ†Ñ–, Ñ‰Ğ¾ ĞºĞ¾Ğ»Ğ¸ÑÑŒ Ğ·Ğ½Ğ°Ğ»Ğ° Ñ–Ğ¼â€™Ñ Ğ»Ñ–Ğ½Ğ·Ğ¸.",
        "answer": ["Ñ–Ğ½ÑÑ‚Ğ¸Ñ‚ÑƒÑ‚ Ğ¾Ğ¿Ñ‚Ğ¸ĞºĞ¸"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 3 â€” ĞĞ´Ñ€ĞµÑĞ° Ğ³ĞµĞ½Ñ–Ñ",
        "text": "Â«Ğ‘ÑƒĞ´Ğ¸Ğ½Ğ¾Ğº, Ñƒ ÑĞºĞ¾Ğ¼Ñƒ Ğ´ÑƒĞ¼ĞºĞ¸ Ğ²Ğ¿ĞµÑ€ÑˆĞµ Ğ½Ğ°Ğ±ÑƒĞ²Ğ°Ğ»Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ¸...\"",
        "question": "ĞœÑ–ÑÑ†Ğµ, Ğ´Ğµ ÑĞ½Ğ¸Ğ¹ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½ Ğ¶Ğ¸Ğ² Ğ·Ñ– ÑĞ²Ğ¾Ñ”Ñ Ñ€Ğ¾Ğ´Ğ¸Ğ½Ğ¾Ñ, Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ” ÑĞ¿Ğ¾ĞºÑ–Ğ¹ Ñ– ÑÑŒĞ¾Ğ³Ğ¾Ğ´Ğ½Ñ–. Ğ™Ğ¾Ğ³Ğ¾ Ğ°Ğ´Ñ€ĞµÑĞ° Ğ¼Ğ°Ñ” Ñ‡Ğ¸ÑĞ»Ğ¾, Ğ¿Ğ¾Ğ´Ñ–Ğ»ÑŒĞ½Ğµ Ğ½Ğ° 3, 6 Ñ– 9. ĞĞ°Ğ·Ğ²Ğ° Ğ²ÑƒĞ»Ğ¸Ñ†Ñ– Ğ¿Ğ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ½Ğ° \"Ğœ\" Ñ– Ğ½Ğ°Ğ³Ğ°Ğ´ÑƒÑ” Ğ¿Ñ€Ğ¾ Ğ¼Ğ»Ğ¸Ğ½.",
        "hint": "ĞĞ°Ğ·Ğ²Ğ° Ğ²ÑƒĞ»Ğ¸Ñ†Ñ– Ğ¼Ğ°Ñ” Ñ‰Ğ¾ÑÑŒ ÑĞ¿Ñ–Ğ»ÑŒĞ½Ğµ Ğ·Ñ– ÑĞ»Ğ¾Ğ²Ğ¾Ğ¼ \"MÃ¼hle\".",
        "answer": ["mÃ¼llerstrasse 54", "mullerstrasse 54", "muellerstrasse 54"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 4 â€” ĞœÑ–ÑÑ†Ğµ Ğ¾ÑĞ²Ñ–Ñ‚Ğ¸",
        "text": "Â«ĞÑĞ½Ğ¾Ğ²Ğ° ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ â€” Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ– Ğ·Ğ½Ğ°Ğ½Ğ½Ñ.Â»",
        "question": "(47Ã—40)+(4Ã—2) â€” Ğ¾Ğ±Ñ‡Ğ¸ÑĞ»Ğ¸ Ñ‚Ğ° Ğ·Ğ³Ğ°Ğ´Ğ°Ğ¹, Ñƒ ÑĞºĞ¾Ğ¼Ñƒ Ñ€Ğ¾Ñ†Ñ– ĞĞ»ÑŒĞ±ĞµÑ€Ñ‚ Ğ²ÑÑ‚ÑƒĞ¿Ğ¸Ğ² Ğ´Ğ¾ ĞºĞ»Ğ°ÑĞ¸Ñ‡Ğ½Ğ¾Ñ— ÑˆĞºĞ¾Ğ»Ğ¸.",
        "hint": "ĞœÑ–ÑÑ‚Ğ¾ Ğ·Ğ°Ğ»Ğ¸ÑˆĞ¸Ğ»Ğ¾ ÑĞ»Ñ–Ğ´ Ñƒ ÑĞµÑ€Ñ†Ñ– ÑĞ½Ğ¾Ğ³Ğ¾ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½Ğ° ÑĞ°Ğ¼Ğµ Ğ² Ñ†ĞµĞ¹ Ñ€Ñ–Ğº.",
        "answer": ["1888"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 5 â€” Ğ¢Ğ²Ğ¾Ñ€Ñ‡Ğ° Ğ¿ĞµÑ€ĞµÑ€Ğ²Ğ°",
        "text": "Â«Ğ£ ĞºĞ°Ğ²Ñ– â€” Ğ´ÑƒĞ¼ĞºĞ¸, Ñƒ ÑˆÑƒĞ¼Ñ– â€” Ğ½Ğ°Ñ‚Ñ…Ğ½ĞµĞ½Ğ½Ñ.Â»",
        "question": "Ğ’ Ñ†Ñ–Ğ¹ ĞºĞ°Ğ²â€™ÑÑ€Ğ½Ñ–, Ğ½Ğ°Ğ·Ğ²Ğ° ÑĞºĞ¾Ñ— Ğ·Ğ²ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ñ‡Ğµ ÑĞ»Ğ¾Ğ²Ğ¾ Ğ· Ğ“Ñ€ĞµĞ½Ğ»Ğ°Ğ½Ğ´Ñ–Ñ—, Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ²Ñ–Ğ´Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ¸, Ğ¿ĞµÑ€Ñˆ Ğ½Ñ–Ğ¶ Ñ€ÑƒÑˆĞ¸Ñ‚Ğ¸ Ğ´Ğ°Ğ»Ñ–. Ğ‡Ñ— Ğ½Ğ°Ğ·Ğ²Ğ° Ğ¿Ğ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ½Ğ° \"S\" Ñ– Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ Ğ»Ñ–Ñ‚ĞµÑ€Ğ¸ \"Ğ°\".",
        "hint": "Ğ’Ğ¸Ğ¼Ğ¾Ğ² Ñ†Ñ Ğ½Ğ°Ğ·Ğ²Ñƒ ÑĞº ÑĞ¿Ñ–Ğ² ĞºÑ€Ğ¸Ğ¶Ğ°Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ‚Ğ°Ñ…Ğ°. Ğ¡Ğ°Ğ¼Ğ° Ğ½Ğ°Ğ·Ğ²Ğ° Ğ½Ñ–Ñ‡Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°Ñ”, Ğ°Ğ»Ğµ Ğ·Ğ²ÑƒÑ‡Ğ¸Ñ‚ÑŒ, ÑĞº Ğ· Ñ–Ğ½ÑˆĞ¾Ğ³Ğ¾ ÑĞ²Ñ–Ñ‚Ñƒ.",
        "answer": ["suuapinga"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 6 â€” Ğ“ÑƒĞ¼Ğ°Ğ½Ñ–Ñ‚Ğ°Ñ€Ğ½Ğ° Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ñ–Ñ",
        "text": "Â«ĞĞ°Ğ²Ñ–Ñ‚ÑŒ Ñƒ Ğ¼ÑƒĞ·Ğ¸Ñ†Ñ– Ñ‡Ğ¸ÑĞµĞ» Ñ” Ñ„Ğ°Ğ»ÑŒÑˆĞ¸Ğ²Ñ– Ğ½Ğ¾Ñ‚Ğ¸.Â»",
        "question": "Ğ— ÑĞºĞ¸Ñ… Ğ´Ğ²Ğ¾Ñ… Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ–Ğ² Ñƒ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½Ğ° Ğ±ÑƒĞ»Ğ¸ Ğ½Ğ°Ğ¹Ğ³Ñ–Ñ€ÑˆÑ– Ğ¾Ñ†Ñ–Ğ½ĞºĞ¸ Ğ² Ğ³Ñ–Ğ¼Ğ½Ğ°Ğ·Ñ–Ñ—?",
        "hint": "Ğ’Ğ¾Ğ½Ğ¸ â€” ĞºĞ¾Ñ€Ñ–Ğ½ÑŒ Ñ„Ñ–Ğ»Ğ¾ÑĞ¾Ñ„Ñ–Ñ— Ñ‚Ğ° Ğ½Ğ°ÑƒĞºĞ¸. Ğ‡Ñ… Ğ²Ğ¸Ğ²Ñ‡Ğ°ÑÑ‚ÑŒ Ñ‰Ğµ Ğ·Ñ– ÑˆĞºÑ–Ğ»ÑŒĞ½Ğ¾Ñ— Ğ»Ğ°Ğ²Ğ¸ Ğ² Ğ„Ğ²Ñ€Ğ¾Ğ¿Ñ–.",
        "answer": ["Ğ»Ğ°Ñ‚Ğ¸Ğ½Ğ°, Ğ³Ñ€ĞµÑ†ÑŒĞºĞ°"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 7 â€” Ğ‘Ğ¸Ñ‚Ğ²Ğ° Ñ€Ğ¾Ğ·ÑƒĞ¼Ñ–Ğ²",
        "text": "Â«ĞœĞ°ÑˆĞ¸Ğ½Ğ¸ Ğ½Ğµ Ğ¼Ğ¸ÑĞ»ÑÑ‚ÑŒ, Ğ°Ğ»Ğµ Ğ¼Ğ¸ Ğ·Ğ¼ÑƒÑˆÑƒÑ”Ğ¼Ğ¾ Ñ—Ñ… Ğ·Ğ¼Ğ°Ğ³Ğ°Ñ‚Ğ¸ÑÑ.Â»\nÂ«Ğ£ÑĞ²Ğ° Ğ²Ğ°Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑˆĞ° Ğ·Ğ° Ğ·Ğ½Ğ°Ğ½Ğ½Ñ, Ğ±Ğ¾ Ğ·Ğ½Ğ°Ğ½Ğ½Ñ â€” Ğ¾Ğ±Ğ¼ĞµĞ¶ĞµĞ½Ñ–.Â» â€” Ğ. Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½",
        "question": "Ğ£ ĞœÑĞ½Ñ…ĞµĞ½Ñ– Ñ” Ğ¼Ñ–ÑÑ†Ğµ, Ğ´Ğµ ĞºĞ°Ğ²Ğ° Ğ²Ğ°Ñ€Ğ¸Ñ‚ÑŒÑÑ ÑĞº Ğ·Ğ° Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°Ğ¼Ğ¸, Ğ° Ğ¿Ñ€Ğ¾Ñ†ĞµÑ Ğ½Ğ°Ğ³Ğ°Ğ´ÑƒÑ” Ğ·Ğ¼Ğ°Ğ³Ğ°Ğ½Ğ½Ñ â€” Ğ±Ğ°Ñ€Ğ¸ÑÑ‚Ğ° Ğ¿Ñ€Ğ¾Ñ‚Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ°. Ğ¢ÑƒÑ‚ Ğ»ÑĞ´ÑÑŒĞºĞ¸Ğ¹ Ğ´Ğ¾Ñ‚Ğ¸Ğº Ğ±Ğ¾Ñ€ĞµÑ‚ÑŒÑÑ Ğ· Ñ‚Ğ¾Ñ‡Ğ½Ñ–ÑÑ‚Ñ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ¸, Ğ° Ğ² Ğ¿Ğ¾Ğ²Ñ–Ñ‚Ñ€Ñ– Ğ²Ğ¸Ñ‚Ğ°Ñ” Ğ´ÑƒÑ… ĞµĞºÑĞ¿ĞµÑ€Ğ¸Ğ¼ĞµĞ½Ñ‚Ñƒ. ĞĞ·Ğ¸Ñ€Ğ½Ğ¸ÑÑŒ Ğ½Ğ°Ğ²ĞºĞ¾Ğ»Ğ¾.",
        "hint": "Ğ£ Ñ†ÑŒĞ¾Ğ¼Ñƒ Ğ·Ğ°ĞºĞ»Ğ°Ğ´Ñ– Ğ¿ĞµÑ€ĞµÑ‚Ğ¸Ğ½Ğ°ÑÑ‚ÑŒÑÑ Ğ´Ğ²Ñ– ÑÑ‚Ğ¸Ñ…Ñ–Ñ—: Ğ¶Ğ¸Ğ²Ğ¸Ğ¹ Ñ–Ğ½Ñ‚ĞµĞ»ĞµĞºÑ‚ Ñ– Ñ…Ğ¾Ğ»Ğ¾Ğ´Ğ½Ğ¸Ğ¹ Ñ€Ğ¾Ğ·Ñ€Ğ°Ñ…ÑƒĞ½Ğ¾Ğº. Ğ¢ÑƒÑ‚ Ğ½ĞµĞ¼Ğ°Ñ” Ğ±Ğ¸Ñ‚Ğ²Ğ¸, Ğ° ÑĞºĞ¾Ñ€Ñ–ÑˆĞµ Ñ‚Ğ°Ğ½Ğ¾Ğº, Ğ´Ğµ ĞºĞ¾Ğ¶ĞµĞ½ ĞºÑ€Ğ¾Ğº â€” Ğ²Ğ¸ĞºĞ»Ğ¸Ğº Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ñƒ, Ğ° ĞºĞ¾Ğ¶ĞµĞ½ Ğ¶ĞµÑÑ‚ â€” Ğ½Ğ°Ñ‚Ñ…Ğ½ĞµĞ½Ğ½Ñ Ñ‚Ğ²Ğ¾Ñ€Ñ†Ñ. ĞĞ°Ğ·Ğ²Ğ° Ğ½Ğ°Ğ³Ğ°Ğ´ÑƒÑ” Ğ¿Ñ€Ğ¾ Ğ¿Ñ€Ğ¾Ñ‚Ğ¸ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ, Ñ‰Ğ¾ Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ” Ğ½Ğµ Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ Ğ² ĞºĞ°Ğ²Ñ–, Ğ° Ğ¹ Ñƒ ÑĞ²Ñ–Ñ‚Ñ– Ñ–Ğ´ĞµĞ¹.",
        "answer": ["man versus machine"]
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 8 â€” ĞœÑ–ÑÑ†Ğµ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ³ĞµĞ½Ñ–Ñ",
        "text": "Â«ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¾Ğº ÑˆĞ»ÑÑ…Ñƒ â€” Ñƒ ÑÑ‚Ñ–Ğ½Ğ°Ñ…, Ğ´Ğµ Ğ²Ñ–Ğ´Ğ»ÑƒĞ½ÑÑÑ‚ÑŒ Ğ´ÑƒĞ¼ĞºĞ¸ ÑĞ½Ğ¾ÑÑ‚Ñ–.Â»",
        "question": "ĞŸÑ–Ğ´Ñ–Ğ¹Ğ´Ğ¸ Ğ´Ğ¾ MÃ¼llerstraÃŸe 11. Ğ¯Ğº Ğ½Ğ°Ğ·Ğ¸Ğ²Ğ°Ğ²ÑÑ Ğ·Ğ°ĞºĞ»Ğ°Ğ´ Ğ² Ñ†ÑŒĞ¾Ğ¼Ñƒ Ğ±ÑƒĞ´Ğ¸Ğ½ĞºÑƒ, Ğ´Ğµ Ğ¼Ğ¾Ğ»Ğ¾Ğ´Ğ¸Ğ¹ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½ Ñ€Ğ¾Ğ·Ğ¿Ğ¾Ñ‡Ğ¸Ğ½Ğ°Ğ² ÑĞ²Ñ–Ğ¹  ÑˆĞ»ÑÑ… Ğ´Ğ¾ Ğ²ĞµĞ»Ğ¸ĞºĞ¸Ñ… Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ñ‚Ñ‚Ñ–Ğ²?",
        "hint": "Old tip l u. Â«Ğ†Ğ¼â€™Ñ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ²Ğ°Ğ½Ğµ Ğ² Ñ…Ğ°Ğ¾ÑÑ– Ğ±ÑƒĞºĞ². Ğ¡Ñ‚Ğ°Ñ€Ğµ, ÑˆĞ»ÑÑ…ĞµÑ‚Ğ½Ğµ Ñ– Ğ¼Ğ°Ñ” Ğ²Ñ–Ğ´Ğ³Ğ¾Ğ¼Ñ–Ğ½ Ğ¼Ğ¾Ğ½Ğ°Ñ€Ñ…Ñ–Ñ—...Â»",
        "answer": ["Luitpold Gymnasium"] 
    },
    {
        "title": "Ğ¢Ğ¾Ñ‡ĞºĞ° 9 â€” ĞœÑ–ÑÑ†Ğµ Ñ€Ñ–Ğ²Ğ½Ğ¾Ğ²Ğ°Ğ³Ğ¸",
        "text": "Â«ĞŸÑ€Ğ¾ÑÑ‚Ñ–Ñ€, Ğ´Ğµ Ñ…Ğ°Ğ¾Ñ Ñ– ÑĞ¸Ğ¼ĞµÑ‚Ñ€Ñ–Ñ ÑƒĞºĞ»Ğ°Ğ»Ğ¸ Ğ´Ğ°Ğ²Ğ½Ñ–Ğ¹ Ğ¿Ğ°ĞºÑ‚.Â»",
        "question": "Ğ¢ÑƒÑ‚ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½ Ğ¼Ñ–Ğ³ Ğ±Ğ¸ Ğ²Ñ–Ğ´Ñ‡ÑƒÑ‚Ğ¸ Ğ»Ğ¾Ğ³Ñ–ĞºÑƒ Ğ² Ğ»Ñ–Ğ½Ñ–ÑÑ… Ñ– Ğ³Ğ°Ñ€Ğ¼Ğ¾Ğ½Ñ–Ñ Ğ² ÑˆÑƒĞ¼Ñ–. Ğ’Ñ–Ğ´Ğ³Ğ°Ğ´Ğ°Ğ¹ Ğ½Ğ°Ğ·Ğ²Ñƒ Ñ†ÑŒĞ¾Ğ³Ğ¾ Ğ¶Ğ¸Ğ²Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑ…Ğ°Ğ½Ñ–Ğ·Ğ¼Ñƒ, Ñ‰Ğ¾ Ğ¿ÑƒĞ»ÑŒÑÑƒÑ” ÑĞµÑ€Ñ†ĞµĞ¼ Ğ¼Ñ–ÑÑ‚Ğ° Ğ²Ğ¶Ğµ ÑÑ‚Ğ¾Ğ»Ñ–Ñ‚Ñ‚Ñ.",
        "hint": "ĞŸÑ€Ğ¾Ğ¹Ğ´Ğ¸ 550 Ğ¼ Ğ² Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ĞºÑƒ Ğ¿Ñ–Ğ²Ğ½Ñ–Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑÑ…Ğ¾Ğ´Ñƒ.",
        "answer": ["viktualienmarkt"]
    }
]

PROGRESS_FILE = 'user_progress.json'

def load_progress():
    if os.path.exists(PROGRESS_FILE):
        with open(PROGRESS_FILE, 'r', encoding='utf-8') as f:
            return json.load(f)
    return {}

def save_progress(progress):
    with open(PROGRESS_FILE, 'w', encoding='utf-8') as f:
        json.dump(progress, f)

user_progress = load_progress()

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = str(update.effective_user.id)
    user_progress[user_id] = 0
    save_progress(user_progress)
    await send_quest_point(update, context)

async def send_quest_point(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = str(update.effective_user.id)
    step = user_progress.get(user_id, 0)
    if step < len(QUEST):
        point = QUEST[step]
        message = f"{point['title']}\n\n{point['text']}\n\nĞ—Ğ°Ğ²Ğ´Ğ°Ğ½Ğ½Ñ: {point['question']}\n\nğŸ“Œ _ĞŸÑ–Ğ´ĞºĞ°Ğ·ĞºĞ°:_ {point['hint']}"
        await context.bot.send_message(chat_id=update.effective_chat.id, text=message, parse_mode="Markdown")
    else:
        await context.bot.send_message(
            chat_id=update.effective_chat.id,
            text=(
                "ğŸ‰ Ğ’Ñ–Ñ‚Ğ°Ñ! Ğ’Ğ¸ Ğ¿Ñ€Ğ¾Ğ¹ÑˆĞ»Ğ¸ Ğ²ĞµÑÑŒ ĞºĞ²ĞµÑÑ‚ 'ĞšĞ¾Ğ´ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½Ğ°'.\n\n"
                "Ğ’Ğ¸ Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ğ»Ğ¸ Ğ½Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ– â€” Ğ²Ğ¸ Ğ²Ñ–Ğ´Ñ‡ÑƒĞ»Ğ¸ Ğ´ÑƒÑ… Ğ¿Ğ¾ÑˆÑƒĞºÑƒ, Ğ´Ğµ ĞºĞ¾Ğ¶Ğ½Ğ° Ğ·Ğ°Ğ³Ğ°Ğ´ĞºĞ° â€” Ñ†Ğµ ĞºÑ€Ğ¾Ğº Ğ´Ğ¾ Ñ€Ğ¾Ğ·ÑƒĞ¼Ñ–Ğ½Ğ½Ñ Ğ³Ğ»Ğ¸Ğ±Ğ¸Ğ½ ÑĞ²Ñ–Ñ‚Ñƒ Ñ– ÑĞµĞ±Ğµ.\n"
                "Ğ¯Ğº ĞºĞ¾Ğ»Ğ¸ÑÑŒ Ğ•Ğ¹Ğ½ÑˆÑ‚ĞµĞ¹Ğ½ ĞºĞ°Ğ·Ğ°Ğ², Â«Ğ£ÑĞ²Ğ° Ğ²Ğ°Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑˆĞ° Ğ·Ğ° Ğ·Ğ½Ğ°Ğ½Ğ½ÑÂ», Ñ– ÑĞ°Ğ¼Ğµ ÑƒÑĞ²Ğ° Ğ²ĞµĞ´Ğµ Ğ½Ğ°Ñ Ğ·Ğ° Ğ¼ĞµĞ¶Ñ– Ğ¾Ñ‡ĞµĞ²Ğ¸Ğ´Ğ½Ğ¾Ğ³Ğ¾.\n\n"
                "ĞĞµÑ…Ğ°Ğ¹ Ñ†ĞµĞ¹ ÑˆĞ»ÑÑ… Ğ½Ğ°Ğ´Ğ¸Ñ…Ğ°Ñ” Ğ²Ğ°Ñ Ğ½Ğµ Ğ±Ğ¾ÑÑ‚Ğ¸ÑÑŒ Ğ¿Ğ¸Ñ‚Ğ°Ñ‚Ğ¸, ÑˆÑƒĞºĞ°Ñ‚Ğ¸ Ñ– Ğ²Ñ–Ğ´ĞºÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ğµ â€” Ğ°Ğ´Ğ¶Ğµ ÑĞ¿Ñ€Ğ°Ğ²Ğ¶Ğ½Ñ Ğ¼ÑƒĞ´Ñ€Ñ–ÑÑ‚ÑŒ Ğ¿Ğ¾Ñ‡Ğ¸Ğ½Ğ°Ñ”Ñ‚ÑŒÑÑ Ñ‚Ğ°Ğ¼, Ğ´Ğµ Ğ·Ğ°ĞºÑ–Ğ½Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ Ğ·Ğ²Ğ¸Ñ‡Ğ½Ğµ."
            )
        )

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = str(update.effective_user.id)
    step = user_progress.get(user_id, 0)
    if step < len(QUEST):
        point = QUEST[step]
        user_answer = normalize_text(update.message.text)
        correct_answers = [normalize_text(ans) for ans in point["answer"]]
        if user_answer in correct_answers:
            await context.bot.send_message(chat_id=update.effective_chat.id, text="âœ… Ğ’Ñ–Ñ€Ğ½Ğ¾!")
            user_progress[user_id] = step + 1
            save_progress(user_progress)
            await send_quest_point(update, context)
        else:
            await context.bot.send_message(chat_id=update.effective_chat.id, text="âŒ ĞĞµĞ²Ñ–Ñ€Ğ½Ğ¾. Ğ¡Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ñ‰Ğµ Ñ€Ğ°Ğ·.")

if __name__ == '__main__':
    application = ApplicationBuilder().token("7222439087:AAF4nAy9vsmr9TkIsVqojFnk8oevXJSKL-s").build()

    application.add_handler(CommandHandler("start", start))
    application.add_handler(MessageHandler(filters.TEXT & (~filters.COMMAND), handle_message))

    application.run_polling()
