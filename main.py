import os
from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes, MessageHandler, filters

QUEST_POINTS = [
    {
        "text": (
            "–¢–æ—á–∫–∞ 1 ‚Äî –ü–æ—Å–ª–∞–Ω–Ω—è —Å–≤—ñ—Ç–ª–∞\n\n"
            "¬´–£ —Ç–µ–º—Ä—è–≤—ñ —Å–≤—ñ—Ç–ª–æ —Ö–æ–≤–∞—î—Ç—å—Å—è –∑–∞ —Ç—Ä—å–æ–º–∞ –∫—Ä–æ–∫–∞–º–∏ –Ω–∞–∑–∞–¥.¬ª\n"
            "¬´–†–æ–∑—à–∏—Ñ—Ä—É–π –ø–æ—Å–ª–∞–Ω–Ω—è, —â–æ —Å—Ç–æ—ó—Ç—å –Ω–∞ –ø–æ—Ä–æ–∑—ñ –Ω–æ–≤–∏—Ö –∑–Ω–∞–Ω—å.¬ª\n\n"
            "–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç: `Khoor, Zruog!`\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: —Ä–æ–∑—à–∏—Ñ—Ä—É–π —Ü–µ–π —Ç–µ–∫—Å—Ç –∑–∞ —à–∏—Ñ—Ä–æ–º –¶–µ–∑–∞—Ä—è (–∑—Å—É–≤ –Ω–∞ 3 –ª—ñ—Ç–µ—Ä–∏ –Ω–∞–∑–∞–¥).\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –ü–æ–¥—É–º–∞–π –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ —à—É–∫–∞–≤ —Å–≤—ñ—Ç–ª–æ —É –ª—ñ–Ω–∑–∞—Ö —ñ –ø—Ä–æ–º–µ–Ω—è—Ö."
        ),
        "answer": "hello world",
        "hint": "–ü–æ–¥—É–º–∞–π –ø—Ä–æ —Ç–æ–≥–æ, —Ö—Ç–æ —à—É–∫–∞–≤ —Å–≤—ñ—Ç–ª–æ —É –ª—ñ–Ω–∑–∞—Ö —ñ –ø—Ä–æ–º–µ–Ω—è—Ö."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 2 ‚Äî –°–∫–ª—è–Ω–µ –æ–±–ª–∏—á—á—è –Ω–∞—É–∫–∏\n\n"
            "¬´–Ü–Ω—Ç–µ–ª–µ–∫—Ç ‚Äî —Ü–µ –Ω–µ –∑–Ω–∞–Ω–Ω—è, –∞ —É—è–≤–∞.¬ª ‚Äî –ê. –ï–π–Ω—à—Ç–µ–π–Ω\n"
            "¬´–°–≤—ñ—Ç–ª–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–µ, —â–æ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ —É —Ç–µ–º—Ä—è–≤—ñ.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –ó–Ω–∞–π–¥–∏ –º—ñ—Å—Ü–µ, –¥–µ —Ñ—ñ–∑–∏–∫–∞ —Å—Ç–∞–≤–∞–ª–∞ –º–∏—Å—Ç–µ—Ü—Ç–≤–æ–º —Å–≤—ñ—Ç–ª–∞. –ö–æ–ª–∏—Å—å —Ç—É—Ç —à–ª—ñ—Ñ—É–≤–∞–ª–∏ –ª—ñ–Ω–∑–∏, —Å—å–æ–≥–æ–¥–Ω—ñ ‚Äî —Ü–µ –±—É–¥—ñ–≤–ª—è –∑—ñ —Å–∫–ª—è–Ω–∏–º –æ–±–ª–∏—á—á—è–º.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –í —Ü—å–æ–º—É –º—ñ—Å—Ü—ñ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –Ω–∞–¥ –∑–∞–∫–æ–Ω–∞–º–∏ –æ–ø—Ç–∏–∫–∏, —ñ –≤–æ–Ω–æ –¥–æ—Å—ñ —Å–ª—É–∂–∏—Ç—å –Ω–∞—É—Ü—ñ –Ω–∞ –≤—É–ª–∏—Ü—ñ, —â–æ –∫–æ–ª–∏—Å—å –∑–Ω–∞–ª–∞ —ñ–º‚Äô—è –ª—ñ–Ω–∑–∏."
        ),
        "answer": "—ñ–Ω—Å—Ç–∏—Ç—É—Ç –æ–ø—Ç–∏–∫–∏",
        "hint": "–í —Ü—å–æ–º—É –º—ñ—Å—Ü—ñ –ø—Ä–∞—Ü—é–≤–∞–ª–∏ –Ω–∞–¥ –∑–∞–∫–æ–Ω–∞–º–∏ –æ–ø—Ç–∏–∫–∏, —ñ –≤–æ–Ω–æ –¥–æ—Å—ñ —Å–ª—É–∂–∏—Ç—å –Ω–∞—É—Ü—ñ –Ω–∞ –≤—É–ª–∏—Ü—ñ, —â–æ –∫–æ–ª–∏—Å—å –∑–Ω–∞–ª–∞ —ñ–º‚Äô—è –ª—ñ–Ω–∑–∏."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 3 ‚Äî –ê–¥—Ä–µ—Å–∞ –≥–µ–Ω—ñ—è\n\n"
            "¬´–ë—É–¥–∏–Ω–æ–∫, —É —è–∫–æ–º—É –¥—É–º–∫–∏ –≤–ø–µ—Ä—à–µ –Ω–∞–±—É–≤–∞–ª–∏ —Ñ–æ—Ä–º–∏...\"\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –ú—ñ—Å—Ü–µ, –¥–µ —é–Ω–∏–π –ï–π–Ω—à—Ç–µ–π–Ω –∂–∏–≤ –∑—ñ —Å–≤–æ—î—é —Ä–æ–¥–∏–Ω–æ—é, –∑–±–µ—Ä—ñ–≥–∞—î —Å–ø–æ–∫—ñ–π —ñ —Å—å–æ–≥–æ–¥–Ω—ñ. –ô–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –º–∞—î —á–∏—Å–ª–æ, –ø–æ–¥—ñ–ª—å–Ω–µ –Ω–∞ 3, 6 —ñ 9. –ù–∞–∑–≤–∞ –≤—É–ª–∏—Ü—ñ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –Ω–∞ \"–ú\" —ñ –Ω–∞–≥–∞–¥—É—î –ø—Ä–æ –º–ª–∏–Ω.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –ù–∞–∑–≤–∞ –≤—É–ª–∏—Ü—ñ –º–∞—î —â–æ—Å—å —Å–ø—ñ–ª—å–Ω–µ –∑—ñ —Å–ª–æ–≤–æ–º \"M√ºhle\"."
        ),
        "answer": "m√ºllerstra√üe 54",
        "hint": "–ù–∞–∑–≤–∞ –≤—É–ª–∏—Ü—ñ –º–∞—î —â–æ—Å—å —Å–ø—ñ–ª—å–Ω–µ –∑—ñ —Å–ª–æ–≤–æ–º \"M√ºhle\"."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 4 ‚Äî –ú—ñ—Å—Ü–µ –æ—Å–≤—ñ—Ç–∏\n\n"
            "¬´–û—Å–Ω–æ–≤–∞ –∫–æ–∂–Ω–æ–≥–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –∑–Ω–∞–Ω–Ω—è.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: (47√ó40)+(100√∑25) ‚Äî –æ–±—á–∏—Å–ª–∏ —Ç–∞ –∑–≥–∞–¥–∞–π, —É —è–∫–æ–º—É —Ä–æ—Ü—ñ –ê–ª—å–±–µ—Ä—Ç –≤—Å—Ç—É–ø–∏–≤ –¥–æ –∫–ª–∞—Å–∏—á–Ω–æ—ó —à–∫–æ–ª–∏.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –ú—ñ—Å—Ç–æ –∑–∞–ª–∏—à–∏–ª–æ —Å–ª—ñ–¥ —É —Å–µ—Ä—Ü—ñ —é–Ω–æ–≥–æ –ï–π–Ω—à—Ç–µ–π–Ω–∞ —Å–∞–º–µ –≤ —Ü–µ–π —Ä—ñ–∫."
        ),
        "answer": "1888",
        "hint": "–ú—ñ—Å—Ç–æ –∑–∞–ª–∏—à–∏–ª–æ —Å–ª—ñ–¥ —É —Å–µ—Ä—Ü—ñ —é–Ω–æ–≥–æ –ï–π–Ω—à—Ç–µ–π–Ω–∞ —Å–∞–º–µ –≤ —Ü–µ–π —Ä—ñ–∫."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 5 ‚Äî –ö–ª–∞—Å–∏—á–Ω–∞ –Ω–∞–∑–≤–∞\n\n"
            "¬´–ü–æ—á–∞—Ç–æ–∫ —à–ª—è—Ö—É ‚Äî —É —Å—Ç—ñ–Ω–∞—Ö, –¥–µ –≤—ñ–¥–ª—É–Ω—é—é—Ç—å –¥—É–º–∫–∏ —é–Ω–æ—Å—Ç—ñ.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –í—ñ–¥–≥–∞–¥–∞–π –Ω–∞–∑–≤—É –≥—ñ–º–Ω–∞–∑—ñ—ó, –¥–µ –Ω–∞–≤—á–∞–≤—Å—è –ï–π–Ω—à—Ç–µ–π–Ω. –á—ó —ñ–º‚Äô—è –≤—à–∞–Ω–æ–≤—É—î –º–æ–Ω–∞—Ä—Ö–∞ —ñ –∫–ª–∞—Å–∏–∫—É.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –í –Ω–∞–∑–≤—ñ —Ü—ñ—î—ó —à–∫–æ–ª–∏ —î —Å–ª–æ–≤–∞, –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ –∑ –∫–æ—Ä–æ–ª–µ–º —Ç–∞ –ª–∞—Ç–∏–Ω—Å—å–∫–æ—é –∫—É–ª—å—Ç—É—Ä–æ—é."
        ),
        "answer": "luitpold-gymnasium",
        "hint": "–í –Ω–∞–∑–≤—ñ —Ü—ñ—î—ó —à–∫–æ–ª–∏ —î —Å–ª–æ–≤–∞, –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ –∑ –∫–æ—Ä–æ–ª–µ–º —Ç–∞ –ª–∞—Ç–∏–Ω—Å—å–∫–æ—é –∫—É–ª—å—Ç—É—Ä–æ—é."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 6 ‚Äî –ì—É–º–∞–Ω—ñ—Ç–∞—Ä–Ω–∞ –≥–∞—Ä–º–æ–Ω—ñ—è\n\n"
            "¬´–ù–∞–≤—ñ—Ç—å —É –º—É–∑–∏—Ü—ñ —á–∏—Å–µ–ª —î —Ñ–∞–ª—å—à–∏–≤—ñ –Ω–æ—Ç–∏.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –ó —è–∫–∏—Ö –¥–≤–æ—Ö –∫–ª–∞—Å–∏—á–Ω–∏—Ö –º–æ–≤ —É –ï–π–Ω—à—Ç–µ–π–Ω–∞ –±—É–ª–∏ –Ω–∞–π–≥—ñ—Ä—à—ñ –æ—Ü—ñ–Ω–∫–∏ –≤ –≥—ñ–º–Ω–∞–∑—ñ—ó?\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –¶—ñ –º–æ–≤–∏ ‚Äî –∫–æ—Ä—ñ–Ω—å —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó —Ç–∞ –Ω–∞—É–∫–∏. –á—Ö –≤–∏–≤—á–∞—é—Ç—å —â–µ –∑—ñ —à–∫—ñ–ª—å–Ω–æ—ó –ª–∞–≤–∏ –≤ –Ñ–≤—Ä–æ–ø—ñ."
        ),
        "answer": "–ª–∞—Ç–∏–Ω–∞ –≥—Ä–µ—Ü—å–∫–∞",
        "hint": "–¶—ñ –º–æ–≤–∏ ‚Äî –∫–æ—Ä—ñ–Ω—å —Ñ—ñ–ª–æ—Å–æ—Ñ—ñ—ó —Ç–∞ –Ω–∞—É–∫–∏. –á—Ö –≤–∏–≤—á–∞—é—Ç—å —â–µ –∑—ñ —à–∫—ñ–ª—å–Ω–æ—ó –ª–∞–≤–∏ –≤ –Ñ–≤—Ä–æ–ø—ñ."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 7 ‚Äî –¢–≤–æ—Ä—á–∞ –ø–µ—Ä–µ—Ä–≤–∞\n\n"
            "¬´–£ –∫–∞–≤—ñ ‚Äî –¥—É–º–∫–∏, —É —à—É–º—ñ ‚Äî –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –í —Ü—ñ–π –∫–∞–≤‚Äô—è—Ä–Ω—ñ, –Ω–∞–∑–≤–∞ —è–∫–æ—ó –∑–≤—É—á–∏—Ç—å –Ω–∞—á–µ —Å–ª–æ–≤–æ –∑ –ì—Ä–µ–Ω–ª–∞–Ω–¥—ñ—ó, –º–æ–∂–Ω–∞ –≤—ñ–¥–ø–æ—á–∏—Ç–∏, –ø–µ—Ä—à –Ω—ñ–∂ —Ä—É—à–∏—Ç–∏ –¥–∞–ª—ñ. –á—ó –Ω–∞–∑–≤–∞ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –Ω–∞ \"S\" —ñ –º—ñ—Å—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä –ª—ñ—Ç–µ—Ä–∏ \"–∞\".\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –í–∏–º–æ–≤ —Ü—é –Ω–∞–∑–≤—É —è–∫ —Å–ø—ñ–≤ –∫—Ä–∏–∂–∞–Ω–æ–≥–æ –ø—Ç–∞—Ö–∞. –°–∞–º–∞ –Ω–∞–∑–≤–∞ –Ω—ñ—á–æ–≥–æ –Ω–µ –æ–∑–Ω–∞—á–∞—î, –∞–ª–µ –∑–≤—É—á–∏—Ç—å, —è–∫ –∑ —ñ–Ω—à–æ–≥–æ —Å–≤—ñ—Ç—É."
        ),
        "answer": "suuapinga",
        "hint": "–í–∏–º–æ–≤ —Ü—é –Ω–∞–∑–≤—É —è–∫ —Å–ø—ñ–≤ –∫—Ä–∏–∂–∞–Ω–æ–≥–æ –ø—Ç–∞—Ö–∞. –°–∞–º–∞ –Ω–∞–∑–≤–∞ –Ω—ñ—á–æ–≥–æ –Ω–µ –æ–∑–Ω–∞—á–∞—î, –∞–ª–µ –∑–≤—É—á–∏—Ç—å, —è–∫ –∑ —ñ–Ω—à–æ–≥–æ —Å–≤—ñ—Ç—É."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 8 ‚Äî –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó —Ç–∞ –±–æ—Ä–æ—Ç—å–±–∞\n\n"
            "¬´–ú–∞—à–∏–Ω–∏ –Ω–µ –º–∏—Å–ª—è—Ç—å, –∞–ª–µ –º–∏ –∑–º—É—à—É—î–º–æ —ó—Ö –∑–º–∞–≥–∞—Ç–∏—Å—è.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –ù–∞–∑–≤–∞ —Ü—å–æ–≥–æ –º—ñ—Å—Ü—è –ø–æ—î–¥–Ω—É—î –ª—é–¥–∏–Ω—É —ñ —Ç–µ—Ö–Ω—ñ–∫—É. –¶–µ –Ω–∞–∑–≤–∞ –∫–∞–≤‚Äô—è—Ä–Ω—ñ, –≤ —è–∫—ñ–π –Ω—ñ–±–∏ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –¥—É–µ–ª—å –º—ñ–∂ —Ç–≤–æ—Ä—Ü–µ–º —ñ –π–æ–≥–æ —Ç–≤–æ—Ä—ñ–Ω–Ω—è–º.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –ü–æ–¥—É–º–∞–π –ø—Ä–æ –º—ñ—Å—Ü–µ, –¥–µ \"–ª—é–¥–∏–Ω–∞ –ø—Ä–æ—Ç–∏ –º–∞—à–∏–Ω–∏\"."
        ),
        "answer": "man versus machine",
        "hint": "–ü–æ–¥—É–º–∞–π –ø—Ä–æ –º—ñ—Å—Ü–µ, –¥–µ \"–ª—é–¥–∏–Ω–∞ –ø—Ä–æ—Ç–∏ –º–∞—à–∏–Ω–∏\"."
    },
    {
        "text": (
            "–¢–æ—á–∫–∞ 9 ‚Äî –ú—ñ—Å—Ü–µ —Ä—ñ–≤–Ω–æ–≤–∞–≥–∏\n\n"
            "¬´–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–∏–≤–µ–ª–∞ –º–µ–Ω–µ –¥–æ —Ä–∏–Ω–∫—É ‚Äî –º—ñ—Å—Ü—è, –¥–µ –≤—Å–µ –∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–æ.¬ª\n\n"
            "–ó–∞–≤–¥–∞–Ω–Ω—è: –¢—É—Ç –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —Å–∏–º–µ—Ç—Ä—ñ—é –≤ —Ö–∞–æ—Å—ñ. –ü—Ä–æ–¥—É–∫—Ç–∏ —ñ —Ñ–æ—Ä–º—É–ª–∏ —Ç—É—Ç –ø–æ—î–¥–Ω—É—é—Ç—å—Å—è –≤ –≥–∞—Ä–º–æ–Ω—ñ—ó. –ï–π–Ω—à—Ç–µ–π–Ω –ª—é–±–∏–≤ –ø–æ—Ä—è–¥–æ–∫, –∞ —Ç—É—Ç ‚Äî –π–æ–≥–æ –∂–∏–≤–∞ —Ñ–æ—Ä–º–∞. –í—ñ–¥–≥–∞–¥–∞–π –Ω–∞–∑–≤—É —Ü—å–æ–≥–æ —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ–≥–æ –º—ñ—Å—Ü—è.\n\n"
            "üìå _–ü—ñ–¥–∫–∞–∑–∫–∞ (–∑–∞ –∑–∞–ø–∏—Ç–æ–º):_ –¶–µ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Ä–∏–Ω–æ–∫ –ú—é–Ω—Ö–µ–Ω–∞, –¥–µ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —è–∫ —è–±–ª—É–∫–æ, —Ç–∞–∫ —ñ –≤—ñ–¥–ª—É–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å."
        ),
        "answer": "viktualienmarkt",
        "hint": "–¶–µ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π —Ä–∏–Ω–æ–∫ –ú—é–Ω—Ö–µ–Ω–∞, –¥–µ –º–æ–∂–Ω–∞ –∑–Ω–∞–π—Ç–∏ —è–∫ —è–±–ª—É–∫–æ, —Ç–∞–∫ —ñ –≤—ñ–¥–ª—É–Ω–Ω—è —Ä—ñ–≤–Ω—è–Ω—å."
    },
]

class QuestBot:
    def __init__(self):
        self.current_point = 0
        self.showing_hint = False

    async def start(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        self.current_point = 0
        self.showing_hint = False
        await update.message.reply_text(
            "–í—ñ—Ç–∞—é —É –∫–≤–µ—Å—Ç—ñ '–ö–æ–¥ –ï–π–Ω—à—Ç–µ–π–Ω–∞'!\n\n" + QUEST_POINTS[self.current_point]["text"] + "\n\n"
            "–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π—Ç–µ –Ω–∞ –∑–∞–≤–¥–∞–Ω–Ω—è –∞–±–æ –Ω–∞–ø–∏—à—ñ—Ç—å /hint –¥–ª—è –ø—ñ–¥–∫–∞–∑–∫–∏."
        )

    async def hint(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        if self.showing_hint:
            await update.message.reply_text("–ü—ñ–¥–∫–∞–∑–∫–∞ –≤–∂–µ –ø–æ–∫–∞–∑–∞–Ω–∞.")
        else:
            self.showing_hint = True
            await update.message.reply_text(QUEST_POINTS[self.current_point]["hint"])

    async def handle_answer(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        user_answer = update.message.text.lower().strip()
        correct_answer = QUEST_POINTS[self.current_point]["answer"].lower()
        user_answer_clean = ''.join(c for c in user_answer if c.isalnum() or c.isspace())
        correct_answer_clean = ''.join(c for c in correct_answer if c.isalnum() or c.isspace())

        if user_answer_clean == correct_answer_clean:
            await update.message.reply_text("‚úÖ –í—ñ—Ä–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó —Ç–æ—á–∫–∏.")
            self.current_point += 1
            self.showing_hint = False
            if self.current_point < len(QUEST_POINTS):
                await update.message.reply_text(QUEST_POINTS[self.current_point]["text"])
            else:
                await update.message.reply_text("üéâ –í–∏ –ø—Ä–æ–π—à–ª–∏ –≤–µ—Å—å –∫–≤–µ—Å—Ç! –í—ñ—Ç–∞—î–º–æ!")
        else:
            await update.message.reply_text("‚ùå –ù–µ–≤—ñ—Ä–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑ –∞–±–æ –Ω–∞–ø–∏—à–∏ /hint.")

quest = QuestBot()
app = ApplicationBuilder().token(os.getenv("BOT_TOKEN")).build()
app.add_handler(CommandHandler("start", quest.start))
app.add_handler(CommandHandler("hint", quest.hint))
app.add_handler(MessageHandler(filters.TEXT & (~filters.COMMAND), quest.handle_answer))

if __name__ == "__main__":
    app.run_polling()
